{% extends "header.html" %}
{% load simpletag %}
{% block body %}
<section class='index my-3 '>
  <div class="row admin ">
    <div class="col-6 col-md-8">
      <h1>Leave </h1>

      <span>
        <span>Student / <span class="text-secondary">Leave List</span></span>
      </span>

    </div>
   
  </div>
</section>

<span class='text-success border border-success p-1'>Total result : {{data.count}} </span>
<div class="row">
    <div class="col-12">
        <form action="" class='form-inline' method="post">
            {% csrf_token %}
            <select name="filter" class="form-control my-2 form-group w-md-25" id='search_input'>
              <option value="">filter</option>
              <option value='none'>Pending</option>
              <option value='false'>Reject</option>
              <option value='true'>Accept</option>
            </select>
            <button class='form-group btn btn-primary ml-2 '  type="submit">Search</button>
        </form>


    </div>
</div>

<table class="table table-striped  table-hover">
  <thead>
    <tr>
      <th scope="col">Id</th>
      <th scope="col">Title</th>
      <th scope="col">Apply date</th>
      
      <th scope="col">Status</th>
      <th scope="col">Handle</th>
    </tr>
  </thead>
  <tbody>
    {% for i in data %}
    <tr>
      <th scope="row">{{i.id}}</th>
      <td>{{i.title|capfirst}}</td>
      <td>{{i.date}} </td>
      <td>
        {% if i.status is None %}
        Pending..
        {% elif i.status %}
        <span class='text-primary'><i class="fa-sharp fa-solid fa-check mr-1"></i> Accepted</span>
        {% else %}
        <span class='text-danger'><i class="fa-sharp fa-solid fa-not-equal mr-1"></i> Rejected</span>
        {% endif %}

      </td>
      <td>
        <div class="row ">


          <div class="col-6 col-md-3">
            <button class="btn btn-sm btn-primary bg-success-light mr-1" data-toggle="modal"
              data-target="#exampleModalCenter{{forloop.counter}}">Views</button>
          </div>

          <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
            aria-hidden="true" id='exampleModalCenter{{forloop.counter}}'>
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">{{i.title|capfirst}}</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  {{i.msg|safe}}
                </div>
                <div class="modal-body">
                  <section><b class='mr-2'>Student :</b> <a
                      href="{% url 'student_details' i.user_id.pk %}">{{i.user_id|capfirst}} {{i.user_id.admin.first_name|capfirst}} {{i.user_id.admin.last_name}}</a></section>
                  <section><b class='mr-2'>Aplply date :</b> {{i.date}} </section>
                  <section><b class='mr-2'>Date :</b> {{i.start}} <b>to</b> {{i.end}}</section>
                  <section><b class='mr-2'>Duration :</b> {% leave_duration i.start i.end %}</section>
                  <section><b class='mr-2'>Status :</b>
                    {% if i.status is None %}
                    Pending..
                    {% elif i.status %}
                    <span class='text-primary'><i class="fa-sharp fa-solid fa-check mr-1"></i> Accepted</span>
                    {% else %}
                    <span class='text-danger'><i class="fa-sharp fa-solid fa-not-equal mr-1"></i> Rejected</span>
                    {% endif %}
                  </section>
                </div>
                <div class="modal-footer">
                  <a href="{% url 'leave_student_accept' i.id %}" type="button" class="btn btn-primary">Accept</a>
                  <a href="{% url 'leave_student_reject' i.id %}" type="button" class="btn btn-danger">Reject</a>
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>


          <div class="modal fade" id="exampleModalCenter{{forloop.counter}}" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">



              </div>
            </div>
          </div>


        </div>
      </td>
    </tr>
    {% empty %}
    <marquee behavior="" direction="">
      <p class='text-danger'>No leave result found</p>
    </marquee>
    {% endfor %}


  </tbody>
</table>
{% endblock body %}
