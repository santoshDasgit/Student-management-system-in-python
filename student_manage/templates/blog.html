{% extends "header.html" %}
{% load static %}
{% block body %}
<section class='index my-3 '>
  <div class="row admin ">
    <div class="col-6 col-md-8">
      <h1>Blog</h1>

      <span>
        <span>blog / <span class="text-secondary">all blog</span></span>
      </span>

    </div>
    <div class="col-6 col-md-2 mt-3 ">
      <a href="{% url 'blog_add' %}" class="btn btn-primary"> blog add <i class="fa fa-newspaper ml-2"></i></a>

    </div>
  </div>
</section>

<section class='shadow-sm p-1 mb-5 bg-white rounded'>
  <span class="text-success border border-success p-1">Total result : {{data.count}}</span>
  <div class="row">
    <div class="col-12">
        <form action="" class="form-inline" method="post">
          {% csrf_token %}
          <select class="form-control my-2 form-group" id="search_input" name="filter" type="search">
            <option value = ''>select option to filter</option>
            <option value="teacher">Teacher blog</option>
            <option value="student">Student blog</option>
            <option value="my">My blog</option>
          </select>
           <button class="form-group btn btn-primary ml-2 " type="submit"> Filter </button>
        </form>


    </div>
</div>
</section>

<section>

    <div class="row">

      {% for i in data %}

      <div class="col-sm-6 mb-5  rounded ">
        <img src="{{i.blog_img.url}}" class="img-fluid rounded-start w-100" style="height:200px;" alt="...">
        <div class="card">
          <div class="card-body">
            <a  {% if i.user.user_type == "3" %}href="{% url 'student_details' i.user.pk %}" {% elif i.user.user_type == "2" %}href="{% url 'teacher_details' i.user.pk %}" {% endif %} class="card-title">
              <img src="{% if i.user.profile_image %}
              {{i.user.profile_image.url}}
              {% else %}
              {% static 'default_dp.jpg' %}
              {% endif %}" class="rounded-circle" height="30" width="30" alt=""> {{i.user.first_name|capfirst}} {{i.user.last_name}} </a>
             
            <h5 class="card-title mt-1">{{i.head|title|truncatechars:20}}</h5>
            <div class="w-100">{{i.description|truncatechars:80}}</div>
            <p class="card-text"><small class="text-muted"><i class="far fa-clock"></i> {{i.date}}</small></p>
            {% if i.user == request.user %}
            <button type='button' class="btn btn-danger" data-toggle="modal"
            data-target="#exampleModalCenter{{forloop.counter}}">Remove </button>
            <a href="{% url 'edit_blog' i.id %}" class="btn btn-success">Edit </a>
         

            {% comment %} midal  {% endcomment %}
            <div class="modal fade" id="exampleModalCenter{{forloop.counter}}" tabindex="-1"
            role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Remove Blog <b>{{i.head|title}}</b></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h5 class="text-danger">Conform remove</h5>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            data-dismiss="modal">Close</button>

                        <a href="{% url 'remove_blog'  i.id %}"
                            class="btn btn-danger">Remove</a>

                    </div>
                </div>
            </div>
        </div>



            {% endif %}
            <a href="{% url 'blog_view' i.id %}" class="btn btn-primary">View </a>
          </div>
        </div>
      </div>
      {% empty %}
      <marquee behavior="" direction=""><span class="text-danger">Emply result</span></marquee>
      {% endfor %}


</section>




{% endblock body %}