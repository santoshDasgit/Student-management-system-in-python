{% extends "header.html" %}
{% load static %}
{% block body %}
<section class="blog mt-5">
    <section class='index my-3 '>
        <div class="row admin ">
            <div class="col-6 col-md-8">
                <h1>Blog</h1>

                <span>
                    <span>blog / <span class="text-secondary">blog Views</span></span>
                </span>

            </div>
            <div class="col-6 col-md-2 mt-3 ">
                <a href="{% url 'blog' %}" class="btn btn-success"> Back</a>

            </div>
        </div>
    </section>
    <div class="blog-image">

        <img alt="" src="{{data.blog_img.url}}" class="img-fluid"></a>
    </div>

    <div class='head'>
        <h2 class='my-3'>{{data.head|title}}</h2>
    </div>

    <div class="post-list">
        <ul>
            <li>
                <div class="post-author">
                    <a href="profile.html"><img src="{% if data.user.profile_image %}
                {{data.user.profile_image.url}}
                {% else %}
                {% static 'default_dp.jpg' %}
                {% endif %}" alt="Post Author"> <span>by {{data.user.first_name|title}}
                            {{data.user.last_name|capfirst}} </span></a>
                </div>
            </li>
            <li><i class="far fa-clock"></i>{{data.date}}</li>
            <li><i class="fa-solid fa-comment"></i> {{comment.count}} Comments</li>

        </ul>
    </div>

    <div class="para">
        {{data.para|safe}}
    </div>

    <div class="card blog-comments mt-3">
        <div class="card-header">
            <h4 class="card-title">Comments ({{comment.count}})</h4>
        </div>
        <div class="card-body pb-0">
            <ul class="comments-list">

                {% for i in comment %}
                <li>
                    <div class="comment">
                        <div class="comment-author">
                            <img class="avatar" alt="" src="{% if i.user.profile_image %}
                            {{i.user.profile_image.url}}
                            {% else %}
                            {% static 'default_dp.jpg' %}
                            {% endif %}">
                        </div>
                        <div class="comment-block">
                            <div class="comment-by">
                                <h5 class="blog-author-name"> {{i.user.first_name}} {{i.user.last_name}} <span
                                        class="blog-date"> <i class="far fa-clock mr-2"></i>{{i.date}}</span></h5>
                            </div>
                            <p>{{i.comment}}</p>


                            <button class="comment-btn border border-0" data-toggle="modal"
                                data-target="#exampleModalCenter{{forloop.counter}}">
                                {% if request.user == i.user or i.blog.user == request.user %}
                                <i class="fa-solid fa-trash"></i>
                                {% endif %}
                            </button>

                            <div class="modal fade" id="exampleModalCenter{{forloop.counter}}" tabindex="-1"
                                role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">Remove message</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <h5 class="text-danger">Conform remove</h5>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">Close</button>

                                            <a href="{% url 'remove_blog_comment' i.id %}"
                                                class="btn btn-danger">Remove</a>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </li>
                {% endfor %}

            </ul>
        </div>
    </div>



    <div class="comment_input shadow p-3 mb-5 bg-body rounded">
        <div class="card-header">
            <h4 class="card-title">Leave Comment</h4>
        </div>
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                <div class="form-group">
                    <textarea rows="4" name="comment" class="form-control bg-grey"
                        placeholder="Comments for {{request.user.first_name}}"></textarea>

                </div>
                <div class="submit-section">
                    <button class="btn  btn-primary " type="submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock body %}