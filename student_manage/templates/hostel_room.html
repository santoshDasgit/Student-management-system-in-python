{% extends 'header.html' %}
{% load static %}
{% block body %}
<section class='index my-3 '>
    <div class="row admin ">
        <div class="col-6 col-md-8">
            <h1>Hostel</h1>

            <span>
                <span>Room / <span class="text-secondary">Room List</span></span>
            </span>

        </div>
        <div class="col-6 col-md-2 mt-3 ">
          <div class='border border-success text-center'>Total <b>{{data.count}}</b> Room</div>
        </div>
    </div>
</section>

<section style="width: 100%; overflow-x: scroll;">
    <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">No</th>
            <th scope="col">Block</th>
            <th scope="col">Room no</th>
            <th scope="col">No of Bed</th>
            <th scope="col">Cost</th>
            <th scope="col">Availability </th>
            <th scope="col">Action </th>
          </tr>
        </thead>
        <tbody>
         
            {% for i in data %}
            <tr>
                <th scope="row">{{forloop.counter}}</th>
                <td>{{i.block}}</td>
                <td>{{i.room}}</td>
                <td>{{i.no_of_bed}}</td>
                <td> ₹ {{i.cost}}</td>
                <td>
                    {% if i.available %}
                            <label for="" class='mt-1 text-white px-1 bg-danger'>Not avalible *</label>
                            {% else %}
                            <label for="" class='mt-1 text-white px-1 bg-success'><b>{{i.available_bed}}</b>  Bed avalible </label>
                    {% endif %}
                </td>
                <td class="text-end" >
                    <div class="actions" >
                       
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong{{forloop.counter}}">
                            View <i class="fa-solid fa-eye ml-1"></i>
                          </button>
                        

                          <div class="modal fade" id="exampleModalLong{{forloop.counter}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title" id="exampleModalLongTitle">Block <b>{{i.block}}</b> Room <b>{{i.room}}</b></h5>
                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  <ul>
                                    <li>Bolck <b>{{i.block}}</b> Room <b>{{i.room}}</b> </li>
                                    <li>Total no of Bed is <b>{{i.no_of_bed}}</b></li>
                                    <li>Total avalible Bed is <b>{{i.available_bed}}</b> </li>
                                    <li>Total cost is <b>₹ {{i.cost}}</b></li>
                                  </ul>
                                  <span class='text-success'>Student details :</span>
                                  {% for j in i.hostel_student_set.all %}
                                  <div class="avatar avatar-sm me-2">

                                    <img class="avatar-img rounded-circle mr-1" height="40px" width="40px" src="
                                    
                                    {% if j.student.admin.profile_image %}
                                        {{j.student.admin.profile_image.url}}
                                        {% else %}
                                        {% static 'default_dp.jpg' %}
                                        {% endif %}
                                    
                                    " alt="lode"> {{j.student.admin.first_name|capfirst}} {{j.student.admin.last_name}} ({{j.student.course.name|title}} , {{j.student.branch.name|title}})</div>
                                    <br>
                                  {% endfor %}
                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                
                                </div>
                              </div>
                            </div>
                          </div>
                    </div>
                </td>
              </tr>
            {% endfor %}
          
        </tbody>
      </table>
</section>

{% endblock body %}